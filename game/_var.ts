/// <reference path="_include.ts"/>

module Engine.Game {

	export var TILE_SIZE = 32;
	export var TILE_INV_SIZE = 1 / TILE_SIZE;

	export var TILE_ATLAS_TILE_SIZE = 32;
	export var TILE_ATLAS_TILES_WIDE = 16;
	export var TILE_ATLAS_TILES_HIGH = 32;

	export var TERRAIN_HEIGHT_SCALE = 50;

	export var ENTITY_BUTTON_X_MAX = 3;
	export var ENTITY_BUTTON_Y_MAX = 3;
	export var ENTITY_MAX_SELECTION = ENTITY_BUTTON_X_MAX * ENTITY_BUTTON_Y_MAX;
	export var ENTITY_MOVE_SPEED_MULTIPLIER = 0.17;
	export var ENTITY_FLASH_TIME = 300;
	export var ENTITY_FLASH_COUNT = 2;

	export var COMMAND_BUTTON_X_MAX = 3;
	export var COMMAND_BUTTON_Y_MAX = 3;
	export var COMMANDS_MAX = COMMAND_BUTTON_X_MAX * COMMAND_BUTTON_Y_MAX;

	export var PATHFINDER_MAX_ITERATIONS = 100;

	export var PLAYERS_MAX = 8;

	export var CAMERA_MOUSE_SCROLL_EDGE = 20;
	export var CAMERA_SCROLL_SPEED = 1;
	export var CAMERA_MAX_ZOOM = 3;
	export var CAMERA_MIN_ZOOM = 1;
	export var CAMERA_ZOOM_INCREMENT = 0.1;

	export var TEST_WORLD_DATA = <RawWorldData>(JSON.parse("{\"world\":{\"terrain\":{\"type\":\"forest\",\"width\":32,\"height\":32,\"tiles\":[502,502,246,246,246,246,246,502,246,502,246,246,502,502,246,502,502,502,502,246,246,246,246,502,246,246,502,246,246,246,246,246,502,502,502,246,246,502,502,502,502,246,246,502,502,246,502,502,246,502,246,502,246,246,502,246,502,246,246,246,502,502,246,246,502,246,502,502,502,502,246,246,246,246,502,502,502,246,246,502,502,246,246,246,502,502,502,502,246,246,502,502,246,502,502,502,502,502,246,502,502,246,246,246,502,502,246,246,246,502,246,502,246,246,246,246,246,246,246,502,246,502,502,246,502,246,502,246,246,502,246,246,246,246,502,502,246,502,502,246,502,246,246,502,502,502,502,246,502,502,502,502,246,246,246,246,502,246,246,502,246,246,246,502,246,246,502,502,246,502,502,246,374,54,310,566,182,246,502,246,502,502,246,246,502,246,246,246,246,502,502,246,502,502,246,246,246,502,246,392,456,456,328,502,598,137,457,329,678,502,502,502,502,502,502,246,502,502,246,246,246,502,502,246,502,502,246,392,200,456,456,232,760,504,88,246,86,169,1017,345,166,502,246,502,502,246,246,246,246,246,502,246,502,246,246,246,502,502,502,424,248,248,248,504,120,312,280,246,86,297,313,25,166,118,310,310,310,182,246,502,502,246,502,246,246,502,502,246,502,246,246,168,248,120,312,56,280,246,246,502,214,710,198,198,358,22,393,201,329,678,246,502,246,502,246,502,246,246,246,502,502,246,246,40,312,280,502,246,502,502,246,246,502,246,246,502,342,393,233,249,345,166,502,246,502,502,502,502,246,246,502,502,502,246,246,246,246,246,246,502,246,246,246,246,502,502,502,246,86,425,505,249,345,166,502,502,502,502,502,246,246,246,246,502,502,246,392,456,200,456,328,502,246,246,246,246,246,502,246,246,342,169,761,761,89,166,246,246,246,246,502,502,246,502,246,502,502,246,168,760,760,504,88,246,246,246,246,502,502,246,502,246,86,41,57,57,25,422,502,502,502,246,246,246,246,246,502,502,246,246,424,248,504,760,88,502,246,246,502,502,502,502,246,502,470,454,454,710,710,230,246,246,246,246,246,502,502,502,246,502,246,502,40,56,312,312,280,246,502,502,246,374,566,566,54,54,182,246,246,502,246,246,246,502,502,246,502,502,502,246,246,502,246,502,502,118,54,566,310,182,246,502,502,342,393,457,457,329,678,502,502,502,502,246,246,502,246,502,502,246,246,246,246,246,502,246,246,598,372,308,436,38,310,54,54,22,297,313,313,25,678,246,246,502,246,502,502,246,502,502,246,246,502,502,246,246,246,502,246,86,340,242,292,52,564,564,308,436,116,52,436,500,678,502,502,502,502,246,502,502,502,246,246,246,246,246,246,246,246,502,246,342,340,242,498,498,754,754,498,420,340,242,36,180,678,502,246,246,246,502,502,246,246,246,502,502,246,246,502,502,502,502,246,598,212,708,196,708,196,452,708,484,340,498,754,676,422,502,502,502,246,502,246,502,502,502,246,246,502,246,502,502,502,246,502,214,710,710,454,710,198,454,454,70,468,708,708,228,678,502,502,502,502,246,502,502,246,246,502,502,502,246,502,502,246,246,502,246,246,246,246,502,246,246,246,214,710,454,454,454,230,502,502,246,246,502,246,246,246,246,246,502,246,246,502,502,246,246,246,502,502,502,502,246,246,246,502,502,502,246,502,246,502,246,502,246,502,246,246,246,502,502,246,502,502,246,246,502,502,246,246,246,246,246,502,502,246,246,502,246,502,502,246,502,246,502,502,502,246,502,502,502,502,246,246,502,502,246,502,502,502,246,246,502,246,502,502,502,246,502,502,246,246,246,246,246,246,246,246,502,246,246,246,502,502,502,246,502,246,502,502,246,246,502,246,246,246,502,502,502,246,502,246,502,246,502,502,246,246,246,502,246,502,502,246,502,246,502,246,502,246,502,502,502,246,502,502,502,246,246,246,502,502,502,502,246,246,502,502,246,246,246,502,502,502,246,502,502,246,246,246,246,502,502,246,502,246,246,502,502,246,502,502,502,502,246,502,502,502,246,502,246,246,246,502,502,502,502,246,502,246,246,502,246,246,246,246,246,502,246,246,502,502,502,246,246,246,246,502,246,502,246,502,502,502,502,502,502,502,246,246,502,246,246,502,502,246,502,246,246,246,246,246,246,502,502,502,502,502,502,502,502,502,246,502,246,502,502,502,502,502,246,246,246,502,246,246,246,246,246,502,502,246,246,246,246,246,502,502,246,502,246,502,502,246,246,502,246,502,246,246,246,246,502,502,246,246,246,502,246,502,246,502,246]},\"teams\":[{\"name\":\"Neutral Team\",\"shareVision\":true},{\"name\":\"Team 1\",\"shareVision\":true},{\"name\":\"Team 2\",\"shareVision\":true},{\"name\":\"Team 3\",\"shareVision\":true},{\"name\":\"Team 4\",\"shareVision\":true},{\"name\":\"Team 5\",\"shareVision\":true},{\"name\":\"Team 6\",\"shareVision\":true},{\"name\":\"Team 7\",\"shareVision\":true},{\"name\":\"Team 8\",\"shareVision\":true}],\"players\":[{\"gold\":1000,\"lumber\":500,\"name\":\"Neutral Player\",\"oil\":250,\"race\":1,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":0},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 1\",\"oil\":250,\"race\":2,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":1},{\"gold\":2400,\"lumber\":1400,\"name\":\"Player 2\",\"oil\":550,\"race\":1,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":2},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 3\",\"oil\":250,\"race\":2,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":3},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 4\",\"oil\":250,\"race\":3,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":4},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 5\",\"oil\":250,\"race\":2,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":5},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 6\",\"oil\":250,\"race\":3,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":6},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 7\",\"oil\":250,\"race\":2,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":7},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 8\",\"oil\":250,\"race\":3,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":8}],\"entities\":[[4194306,359,262204,12058864],[4198402,488,262204,16253200],[4203682,360,263344,13631808],[4207780,364,263344,13631936],[4210692,330,262204,11010384],[4214788,489,262204,16253232],[4218916,334,262174,11010512],[4223012,529,262174,17302064],[4227106,299,262174,9961840],[4231202,297,262174,9961776],[4235298,298,262174,9961808],[4239362,555,262204,18350448],[4243554,326,262234,11010256],[4247652,235,262234,7864688],[4251746,552,262234,18350352],[4255844,494,262234,16253392],[4259940,516,262234,17301648],[4265122,84,263344,4195008],[4268034,82,262204,2622032],[4273600,312,262144,11010864]]},\"user\":{\"cameraX\":480.34108872841,\"cameraY\":351.76123789011,\"cameraZoom\":1.0943023107607,\"playerID\":2,\"placementEntityType\":-1,\"placementRadius\":1,\"placementTileType\":0,\"selectedEntities\":[1026],\"userState\":0}}").world);

	export var TEST_WORLD_DATA2 = "1503330301210101138350225030121013c25228022c030121014b0354221039020121015a220431f031d030121015a21ee3230311030121015a22283f0217030121015a2eb21503d020121015a21463230317030121013c222b3130315030121011e212a3130313030121011e21293130317030121011e212b3210323030121011e2211315031d030121011e214e31f0313030121013c21e93150315030121013c214a31a031c030121014b0316c31a0314030121014b0316831f0311030121013c21e831703f020121013c2167341335c2014123012141134a2214103614140f3614140e3612140d3614140c3612140b3012140a3212140932121408321214073214140632141405301414043014140334a24140234a221401301214003012114281131011fa21f433e83Player 88171121011fa21f433e83Player 78161131011fa21f433e83Player 68151121011fa21f433e83Player 58141131011fa21f433e83Player 48131121011fa21f433e83Player 38121111011226357839603Player 28111121011fa21f433e83Player 18101111011fa21f433e83Neutral Playere1911Team 8611Team 7611Team 6611Team 5611Team 4611Team 3611Team 2611Team 1611Neutral Teamc19101f16111f16101f16111f16101f16111f16101f16101f16101f16111f16111f16101f16101f16101f16101f16111f16101f16111f16101f16101f16111f16111f16101f16111f16101f16111f16111f16101f16101f16101f16101f16101f16111f16111f16101f16101f16101f16101f16101f16111f16101f16101f16101f16111f16111f16111f16111f16111f16101f16111f16101f16111f16111f16111f16111f16111f16111f16111f16111f16111f16101f16101f16101f16101f16101f16101f16111f16101f16111f16111f16101f16101f16111f16101f16101f16111f16111f16111f16111f16111f16111f16111f16101f16111f16101f16111f16101f16101f16101f16101f16111f16111f16111f16101f16101f16111f16101f16101f16101f16101f16101f16111f16101f16101f16111f16101f16111f16111f16111f16111f16101f16101f16101f16111f16101f16111f16111f16111f16101f16111f16111f16111f16111f16101f16111f16111f16101f16101f16111f16101f16111f16111f16101f16101f16101f16101f16111f16111f16101f16111f16111f16111f16101f16101f16101f16111f16111f16101f16101f16111f16111f16111f16111f16101f16101f16101f16111f16111f16111f16101f16111f16111f16111f16101f16111f16101f16111f16101f16111f16101f16111f16111f16101f16111f16101f16101f16101f16111f16111f16101f16111f16101f16111f16101f16111f16111f16111f16101f16101f16101f16111f16101f16101f16111f16111f16101f16111f16101f16111f16111f16111f16101f16101f16101f16111f16101f16101f16101f16101f16101f16101f16101f16101f16111f16111f16101f16111f16111f16111f16101f16111f16101f16101f16111f16111f16111f16101f16111f16111f16101f16101f16111f16111f16111f16111f16101f16111f16111f16111f16101f16111f16101f16111f16111f16101f16111f16101f16101f16111f16111f16101f16101f16101f16101f16101f16111f16111f16101f16101f16111f16111f16101f16111f16111f16101f16101f16101f16111f16101f16111f16101f16111f16101f16111f16101f16111f16111f16111f16101f16101f16101f16111f16111f16111f16111f16101f16101f16101f16111f16111f16101f16101f16111f16101f16101f16101f16101f16101f16111f16101f16101f16111f16111f16101e16111c16111c16111c16121c16101d16101f16101f16101f16111f16101f16101f16101f16101f16111f16101f16101f16111f16111f16101f16111f16111f16111f16101f16101f16111f16111f16101f16111f16111f16111f16111f16121a16101e14121c14121c14111d14101416111c16111c16101c16121c16111c16121c16121c16101d16111f16101f16111f16111f16111f16101f16111f16101f16101f16111f16111f16111f16101f16111f16101f16111f16111f16111f16111a16121a14121f12111f12111514111e14121c14111c14101c14121c14101c14121c14101d14121516101f16111f16111f16111f16111f16101f16101f16111f16111f16101f16101f16101f16111f16111f16101f16101f16101f16111f16121a16101b14101214101f12111514111a14111f12121f12121f12111f12111f12101f12111514111516101f16111f16101f16101f16101f16101f16101f16101f16101f16101f16111f16111f16111f16101f16111f16111f16111f16111f16121a16111f14111b14101314101714111b14111314121314121314101314111214101f12111514101516101f16111f16101f16101f16101f16111f16111f16101f16101f16111f16111f16101f16111f16111f16101f16111f16101f16101f16121a16101119111319111319111219101116101316101316111316101216111b14111314111714121516101f16101f16111f16101f16101f16101f16101f16101f16111f16111f16101f16111f16101f16101f16111f16111f16111f16111f16121a16111419111c19111c19111819111516111f16111f16101f16101b16111316121316101316101716111f16111f16101f16111f16101f16101f16111f16111f16111f16101f16111f16111f16101f16101f16101f16111f16101f16101f16101b16101316101316121316121316111716101f16111f16111f16101f16111118111318111318101318101218111f16101f16111f16101f16111f16111f16111f16101f16101f16101f16101f16101f16101e16121c16121c16111c16111c16111d16111f16101f16111f16111f16111f16111f16101f16101f16111f16101518121f18111f18101f18111a18101f16101f16111f16111f16101f16101f16101f16101f16101f16111f16111f16111f16111a16101119101319101319101219101516101f16111f16101f16111f16111f16101f16101f16101f16101f16101518111f18121f18121f18101a18101f16111f16111f16101f16111f16101f16111f16111f16101f16101f16101f16101f16101a16101519121f19121f19101a19111516101f16101f16111f16101f16101f16101f16101f16101f16111f16111418111c18101c18111c18111818101f16111f16111f16101f16101f16101f16101f16111f16111f16111f16111f16111f16101a16111519101f19111f19111a19101516101f16111f16111f16111f16101f16101f16101f16101f16111f16101f16101f16101f16101f16101f16101f16111f16111f16111f16101f16101f16111f16111f16111f16111f16101f16111f16101a16111519101f19101e19111819111516111f16101f16101f16111f16101f16101f16111f16111f16101f16111f16111118111318101218101f16101f16111f16111f16101f16101f16101f16111f16101f16111f16101f16111f16101f16121a16111419101c19111819101116111616101c16101c16121c16101d16111f16101f16101f16111118101318111318101718101f18101a18101f16101f16111f16101f16111f16111f16101f16101f16111f16101f16111f16111f16101f16101b16111316111316111316101716101a16101119111319111219101516101f16111118111318101718111f18101f18101f18101f18111a18111f16111f16111f16101f16101f16101f16111f16101f16111f16101f16101f16101f16101f16101f16111f16111f16101f16111f16101a16111519131f19101a19101516101f16101518111f18121f18101e18111c18111c18101c18111818101f16111f16111f16101f16111f16111f16101f16101f16101f16111f16111f16101f16111f16111f16111f16111f16111f16111f16121a16111419111c19101819121516111f16111418111c18111c18111818101f16111f16101f16101f16101f16111f16111f16101f16111f16111f16101f16101f16101f16101f16111f16101f16101f16111f16111f16101f16111f16101f16101b16121316111316101316111716101f16111f16111f16101f16111f16111f16101f16101f16111f16101f16101f16101f16111f16101f16101f16111f16101f16101f16101f16101f16111f16111f16111f16111f16101f16111f16111f16111f16111f16101f16101f16111f16101f16111f16111f16101f16111f16111f16101f16101f16101f16101f16111f16101f16101f16111f16101f16111f16101f16111f16111f16101f16111f16101f16101f16101f16101f16101f16101f16101f16111f16101f16111f16101f16101f16101f16111f16111f16101f16101f16101f16111f16111f16101f16111f16111f16111f16111f16111f16101f16111f16111f16101f16101f16111f16111f16111f16111f16101f16101f16101f16111f16111f16101f16101f16111f16111f16111f16101f16101f16101f16101f16111f16111f16111f16111f16101f16111f16101f16101f16111f16111f16101f16101f16101f16111f16101f16111f16101f16101f16111f16101f16111f16101f16111f16111f16101f16111f16111f16101f16101f16111f16111f16111f16111f16101f16101f16111f16111f16111f16101f16101f16101f16101f16101f16111f16101f16101f16111f16101f16101f16101f16101f16111f16111f16111f16111f16101f16111f16111f16101f16101f16111f16101f16111f16101f16101f16101f16101f16101f16111f16111f161202202forest61";


	/*
	export function MyKO<T>(callback: (oldVal: T, newVal: T) => void, ignoreEqual?: boolean, init?: T): KnockoutComputed<T> {
		var _internal = ko.observable();
		var _ret = ko.computed({
			read: function () {
				return _internal();
			},
			write: function (v: T) {
				var oldV = _internal();
				if (ignoreEqual && oldV === v)
					return;
				_internal(v);
				callback(oldV, v);
			}
		});
		if (init !== undefined)
			_ret(init);
		return _ret;
	}
	*/
}