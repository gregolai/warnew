/// <reference path="_include.ts"/>

module Engine.WarNew {

	export var TILE_SIZE = 32;
	export var TILE_INV_SIZE = 1 / TILE_SIZE;

	export var TILE_ATLAS_TILE_SIZE = 32;
	export var TILE_ATLAS_TILES_WIDE = 16;
	export var TILE_ATLAS_TILES_HIGH = 32;

	export var TERRAIN_HEIGHT_SCALE = 50;

	export var ENTITY_BUTTON_X_MAX = 3;
	export var ENTITY_BUTTON_Y_MAX = 3;
	export var ENTITY_MAX_SELECTION = ENTITY_BUTTON_X_MAX * ENTITY_BUTTON_Y_MAX;
	export var ENTITY_MOVE_SPEED_MULTIPLIER = 0.17;

	export var COMMAND_BUTTON_X_MAX = 3;
	export var COMMAND_BUTTON_Y_MAX = 3;
	export var COMMANDS_MAX = COMMAND_BUTTON_X_MAX * COMMAND_BUTTON_Y_MAX;

	export var PATHFINDER_MAX_ITERATIONS = 100;

	export var PLAYERS_MAX = 8;

	export var CAMERA_MOUSE_SCROLL_EDGE = 20;
	export var CAMERA_SCROLL_SPEED = 1;
	export var CAMERA_MAX_ZOOM = 3;
	export var CAMERA_MIN_ZOOM = 1;
	export var CAMERA_ZOOM_INCREMENT = 0.1;

	export var TEST_WORLD_DATA = <RawWorldData>(JSON.parse("{\"world\":{\"terrain\":{\"type\":\"forest\",\"width\":32,\"height\":32,\"tiles\":[502,502,246,246,246,246,246,502,246,502,246,246,502,502,246,502,502,502,502,246,246,246,246,502,246,246,502,246,246,246,246,246,502,502,502,246,246,502,502,502,502,246,246,502,502,246,502,502,246,502,246,502,246,246,502,246,502,246,246,246,502,502,246,246,502,246,502,502,502,502,246,246,246,246,502,502,502,246,246,502,502,246,246,246,502,502,502,502,246,246,502,502,246,502,502,502,502,502,246,502,502,246,246,246,502,502,246,246,246,502,246,502,246,246,246,246,246,246,246,502,246,502,502,246,502,246,502,246,246,502,246,246,246,246,502,502,246,502,502,246,502,246,246,502,502,502,502,246,502,502,502,502,246,246,246,246,502,246,246,502,246,246,246,502,246,246,502,502,246,502,502,246,374,54,310,566,182,246,502,246,502,502,246,246,502,246,246,246,246,502,502,246,502,502,246,246,246,502,246,392,456,456,328,502,598,137,457,329,678,502,502,502,502,502,502,246,502,502,246,246,246,502,502,246,502,502,246,392,200,456,456,232,760,504,88,246,86,169,1017,345,166,502,246,502,502,246,246,246,246,246,502,246,502,246,246,246,502,502,502,424,248,248,248,504,120,312,280,246,86,297,313,25,166,118,310,310,310,182,246,502,502,246,502,246,246,502,502,246,502,246,246,168,248,120,312,56,280,246,246,502,214,710,198,198,358,22,393,201,329,678,246,502,246,502,246,502,246,246,246,502,502,246,246,40,312,280,502,246,502,502,246,246,502,246,246,502,342,393,233,249,345,166,502,246,502,502,502,502,246,246,502,502,502,246,246,246,246,246,246,502,246,246,246,246,502,502,502,246,86,425,505,249,345,166,502,502,502,502,502,246,246,246,246,502,502,246,392,456,200,456,328,502,246,246,246,246,246,502,246,246,342,169,761,761,89,166,246,246,246,246,502,502,246,502,246,502,502,246,168,760,760,504,88,246,246,246,246,502,502,246,502,246,86,41,57,57,25,422,502,502,502,246,246,246,246,246,502,502,246,246,424,248,504,760,88,502,246,246,502,502,502,502,246,502,470,454,454,710,710,230,246,246,246,246,246,502,502,502,246,502,246,502,40,56,312,312,280,246,502,502,246,374,566,566,54,54,182,246,246,502,246,246,246,502,502,246,502,502,502,246,246,502,246,502,502,118,54,566,310,182,246,502,502,342,393,457,457,329,678,502,502,502,502,246,246,502,246,502,502,246,246,246,246,246,502,246,246,598,372,308,436,38,310,54,54,22,297,313,313,25,678,246,246,502,246,502,502,246,502,502,246,246,502,502,246,246,246,502,246,86,340,242,292,52,564,564,308,436,116,52,436,500,678,502,502,502,502,246,502,502,502,246,246,246,246,246,246,246,246,502,246,342,340,242,498,498,754,754,498,420,340,242,36,180,678,502,246,246,246,502,502,246,246,246,502,502,246,246,502,502,502,502,246,598,212,708,196,708,196,452,708,484,340,498,754,676,422,502,502,502,246,502,246,502,502,502,246,246,502,246,502,502,502,246,502,214,710,710,454,710,198,454,454,70,468,708,708,228,678,502,502,502,502,246,502,502,246,246,502,502,502,246,502,502,246,246,502,246,246,246,246,502,246,246,246,214,710,454,454,454,230,502,502,246,246,502,246,246,246,246,246,502,246,246,502,502,246,246,246,502,502,502,502,246,246,246,502,502,502,246,502,246,502,246,502,246,502,246,246,246,502,502,246,502,502,246,246,502,502,246,246,246,246,246,502,502,246,246,502,246,502,502,246,502,246,502,502,502,246,502,502,502,502,246,246,502,502,246,502,502,502,246,246,502,246,502,502,502,246,502,502,246,246,246,246,246,246,246,246,502,246,246,246,502,502,502,246,502,246,502,502,246,246,502,246,246,246,502,502,502,246,502,246,502,246,502,502,246,246,246,502,246,502,502,246,502,246,502,246,502,246,502,502,502,246,502,502,502,246,246,246,502,502,502,502,246,246,502,502,246,246,246,502,502,502,246,502,502,246,246,246,246,502,502,246,502,246,246,502,502,246,502,502,502,502,246,502,502,502,246,502,246,246,246,502,502,502,502,246,502,246,246,502,246,246,246,246,246,502,246,246,502,502,502,246,246,246,246,502,246,502,246,502,502,502,502,502,502,502,246,246,502,246,246,502,502,246,502,246,246,246,246,246,246,502,502,502,502,502,502,502,502,502,246,502,246,502,502,502,502,502,246,246,246,502,246,246,246,246,246,502,502,246,246,246,246,246,502,502,246,502,246,502,502,246,246,502,246,502,246,246,246,246,502,502,246,246,246,502,246,502,246,502,246]},\"teams\":[{\"name\":\"Neutral Team\",\"shareVision\":true},{\"name\":\"Team 1\",\"shareVision\":true},{\"name\":\"Team 2\",\"shareVision\":true},{\"name\":\"Team 3\",\"shareVision\":true},{\"name\":\"Team 4\",\"shareVision\":true},{\"name\":\"Team 5\",\"shareVision\":true},{\"name\":\"Team 6\",\"shareVision\":true},{\"name\":\"Team 7\",\"shareVision\":true},{\"name\":\"Team 8\",\"shareVision\":true}],\"players\":[{\"gold\":1000,\"lumber\":500,\"name\":\"Neutral Player\",\"oil\":250,\"race\":1,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":0},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 1\",\"oil\":250,\"race\":2,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":1},{\"gold\":2400,\"lumber\":1400,\"name\":\"Player 2\",\"oil\":550,\"race\":1,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":2},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 3\",\"oil\":250,\"race\":2,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":3},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 4\",\"oil\":250,\"race\":3,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":4},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 5\",\"oil\":250,\"race\":2,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":5},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 6\",\"oil\":250,\"race\":3,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":6},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 7\",\"oil\":250,\"race\":2,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":7},{\"gold\":1000,\"lumber\":500,\"name\":\"Player 8\",\"oil\":250,\"race\":3,\"raceIsFixed\":true,\"playerType\":1,\"playerTypeIsFixed\":false,\"teamID\":8}],\"entities\":[[4194306,359,262204,12058864],[4198402,488,262204,16253200],[4203682,360,263344,13631808],[4207780,364,263344,13631936],[4210692,330,262204,11010384],[4214788,489,262204,16253232],[4218916,334,262174,11010512],[4223012,529,262174,17302064],[4227106,299,262174,9961840],[4231202,297,262174,9961776],[4235298,298,262174,9961808],[4239362,555,262204,18350448],[4243554,326,262234,11010256],[4247652,235,262234,7864688],[4251746,552,262234,18350352],[4255844,494,262234,16253392],[4259940,516,262234,17301648],[4265122,84,263344,4195008],[4268034,82,262204,2622032],[4273600,312,262144,11010864]]},\"user\":{\"cameraX\":480.34108872841,\"cameraY\":351.76123789011,\"cameraZoom\":1.0943023107607,\"playerID\":2,\"placementEntityType\":-1,\"placementRadius\":1,\"placementTileType\":0,\"selectedEntities\":[1026],\"userState\":0}}").world);

	export var TEST_WORLD_DATA2 = "forest6120220261f11161f11161f10161f10161f10161f10161f10161f11161f10161f11161f10161f10161f11161f11161f10161f11161f11161f11161f11161f10161f10161f10161f10161f11161f10161f10161f11161f10161f10161f10161f10161f10161f11161f11161f11161f10161f10161f11161f11161f11161f11161f10161f10161f11161f11161f10161f11161f11161f10161f11161f10161f11161f10161f10161f11161f10161f11161f10161f10161f10161f11161f11161f10161f10161f11161f10161f11161f11161f11161f11161f10161f10161f10161f10161f11161f11161f11161f10161f10161f11161f11161f10161f10161f10161f11161f11161f11161f11161f10161f10161f11161f11161f10161f11161f11161f11161f11161f11161f10161f11161f11161f10161f10161f10161f11161f11161f10161f10161f10161f11161f10161f11161f10161f10161f10161f10161f10161f10161f10161f11161f10161f11161f11161f10161f11161f10161f11161f10161f10161f11161f10161f10161f10161f10161f11161f11161f10161f11161f11161f10161f11161f10161f10161f11161f11161f11161f11161f10161f11161f11161f11161f11161f10161f10161f10161f10161f11161f10161f10161f11161f10161f10161f10161f11161f10161f10161f11161f11161f10161f11161f11161f10161711161310161311161312161b10161f10161f11161f10161f11161f11161f10161f10161f11161f10161f10161f10161f10161f11161f11161f10161f11161f11161f10161f10161f10161f11161f10181811181c11181c11181411161f11161512191810191c11191411161a12161f11161f11161f11161f11161f11161f11161f10161f11161f11161f10161f10161f10161f11161f11161f10161f11161f11161f10181811181c10181c11181c11181e10181f12181f11181510161f10161510191a10191f13191511161a10161f11161f10161f11161f11161f10161f10161f10161f10161f10161f11161f10161f11161f10161f10161f10161f11161f11161f11181a11181f10181f10181f10181f11181710181311181111161f10161510191211191311191110161a10161710161311161311161311161b10161f10161f11161f11161f10161f11161f10161f10161f11161f11161f10161f11161f10161f10181a10181f10181710181311181310181111161f10161f10161f11161d10161c12161c10161c10161611161110191811191c10191411161a12161f10161f11161f10161f11161f10161f11161f10161f10161f10161f11161f11161f10161f10181210181311181111161f11161f10161f11161f11161f10161f10161f11161f10161f10161f11161511191811191e10191f10191511161a10161f11161f10161f11161f11161f11161f11161f10161f10161f11161f11161f11161f10161f10161f10161f10161f10161f10161f11161f10161f10161f10161f10161f11161f11161f11161f10161510191a11191f11191f10191511161a10161f11161f11161f11161f11161f11161f10161f10161f10161f10161f11161f11161f10181811181c11181c10181c11181411161f11161f10161f10161f10161f10161f10161f11161f10161f10161511191a10191f12191f12191510161a10161f10161f10161f10161f10161f11161f11161f10161f11161f10161f11161f11161f10181a10181f12181f12181f11181510161f10161f10161f10161f10161f11161f11161f10161f11161f10161510191210191310191310191110161a11161f11161f11161f11161f10161f10161f10161f10161f10161f11161f11161f10161f10181a11181f10181f11181f12181510161f11161f10161f10161f11161f11161f11161f11161f10161f11161d11161c11161c11161c12161c12161e10161f10161f10161f10161f10161f10161f11161f11161f11161f10161f11161f10161f11181210181310181311181311181111161f10161f11161f11161f10161711161312161312161310161310161b10161f10161f10161f11161f10161f10161f10161f11161f11161f10161f11161f11161f11161f10161f10161f11161f10161f11161f11161710161310161312161311161b10161f10161f11161f11161511191811191c11191c11191411161a12161f11161f11161f11161f11161f10161f10161f11161f10161f11161f11161f10161f10161f10161f10161f10161f11161f10161f10161512141711141311141b11161210161311161310161310161110191211191311191311191110161a12161f10161f10161f11161f10161f11161f11161f10161f11161f11161f10161f10161f11161f11161f10161f10161f10161f11161f10161510141511121f10141211141310141312141312141311141b11141710141310141b11141f11161a12161f11161f11161f11161f11161f10161f11161f11161f11161f10161f10161f10161f10161f10161f10161f10161f10161f11161f10161511141511121f10121f11121f11121f12121f12121f11141a11141511121f10141210141b10161a12161f11161f10161f10161f10161f11161f11161f10161f10161f10161f11161f11161f10161f10161f11161f11161f11161f11161f10161512141d10141c12141c10141c12141c10141c11141c12141e11141511121f11121f12141a12161a11161f11161f11161f11161f10161f11161f10161f11161f11161f11161f10161f10161f11161f10161f11161f11161f11161f10161f11161d10161c12161c12161c11161c12161c10161c11161c11161410141d11141c12141c12141e10161a12161f11161f11161f11161f11161f10161f11161f11161f10161f10161f11161f11161f11161f10161f11161f11161f10161f10161f11161f10161f10161f10161f10161f11161f10161f10161f10161d10161c12161c11161c11161c11161e10161f11161f11161f10161f10161f11161f10161f10161f10161f10161f10161f11161f10161f10161f11161f11161f10161f10161f10161f11161f11161f11161f11161f10161f10161f10161f11161f11161f11161f10161f11161f10161f11161f10161f11161f10161f11161f10161f10161f10161f11161f11161f10161f11161f11161f10161f10161f11161f11161f10161f10161f10161f10161f10161f11161f11161f10161f10161f11161f10161f11161f11161f10161f11161f10161f11161f11161f11161f10161f11161f11161f11161f11161f10161f10161f11161f11161f10161f11161f11161f11161f10161f10161f11161f10161f11161f11161f11161f10161f11161f11161f10161f10161f10161f10161f10161f10161f10161f10161f11161f10161f10161f10161f11161f11161f11161f10161f11161f10161f11161f11161f10161f10161f11161f10161f10161f10161f11161f11161f11161f10161f11161f10161f11161f10161f11161f11161f10161f10161f10161f11161f10161f11161f11161f10161f11161f10161f11161f10161f11161f10161f11161f11161f11161f10161f11161f11161f11161f10161f10161f10161f11161f11161f11161f11161f10161f10161f11161f11161f10161f10161f10161f11161f11161f11161f10161f11161f11161f10161f10161f10161f10161f11161f11161f10161f11161f10161f10161f11161f11161f10161f11161f11161f11161f11161f10161f11161f11161f11161f10161f11161f10161f10161f10161f11161f11161f11161f11161f10161f11161f10161f10161f11161f10161f10161f10161f10161f10161f11161f10161f10161f11161f11161f11161f10161f10161f10161f10161f11161f10161f11161f10161f11161f11161f11161f11161f11161f11161f11161f10161f10161f11161f10161f10161f11161f11161f10161f11161f10161f10161f10161f10161f10161f10161f11161f11161f11161f11161f11161f11161f11161f11161f11161f10161f11161f10161f11161f11161f11161f11161f11161f10161f10161f10161f11161f10161f10161f10161f10161f10161f11161f11161f10161f10161f10161f10161f10161f11161f11161f10161f11161f10161f11161f11161f10161f10161f11161f10161f11161f10161f10161f10161f10161f11161f11161f10161f10161f10161f11161f10161f11161f10161f11161f10191Neutral Teamc11Team 1611Team 2611Team 3611Team 4611Team 5611Team 6611Team 7611Team 861191Neutral Playere13e831f43fa211011101Player 1813e831f43fa211021111Player 28196035783226311011121Player 3813e831f43fa211021131Player 4813e831f43fa211031141Player 5813e831f43fa211021151Player 6813e831f43fa211031161Player 7813e831f43fa211021171Player 8813e831f43fa2110311811422101400316733c2012101f021703210140131e833c201210111031f03214a2402316834b0301210114031a03414a2403316c34b030121011c031a034101404314a33c201210115031503410140531e933c201210113031f034121406314e31e20121011d0315034121407321131e2012101230321032121408312b31e2012101170313032121409312931e201210113031303212140a312a31e201210115031303210140b322b33c201210117032303216140c314635a2012101d021503416140d3eb25a20121011703f02216140e322835a201210111032303416140f31ee35a20121011d031f034161410320435a20121019022103214a241135424b030121012c03802210141235223c20121012503502015c2413313830101210133031503";


	/*
	export function MyKO<T>(callback: (oldVal: T, newVal: T) => void, ignoreEqual?: boolean, init?: T): KnockoutComputed<T> {
		var _internal = ko.observable();
		var _ret = ko.computed({
			read: function () {
				return _internal();
			},
			write: function (v: T) {
				var oldV = _internal();
				if (ignoreEqual && oldV === v)
					return;
				_internal(v);
				callback(oldV, v);
			}
		});
		if (init !== undefined)
			_ret(init);
		return _ret;
	}
	*/
}